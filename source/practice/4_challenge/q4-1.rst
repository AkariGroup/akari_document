.. highlight:: python
   :linenothreshold: 10

******************************
Q4-1.温度ロガー
******************************


問題
========

**Q4-1.現在時刻と環境温度を10秒ごとに取得して、csvファイルに追記し続けるコードを書きましょう。**

ファイルの場所: akari_practice/4_challenge/question/q4-1_temperature_logger.py

.. code-block:: python

   #!/usr/bin/env python
   # -*- coding: utf-8 -*-

   """
   Q4-1.現在時刻と環境温度を10秒ごとに取得して、csvファイルに追記し続けるコードを書きましょう。
   ヒント1: 時刻の取得はQ3-5,温度の取得はQ2-5を参考にしましょう。
   ヒント2: csvへの書き込みはcsv.writerを使います。
            最初の行にインデックスを書き込んで、以降取得した値を追記していきましょう。
            下記がlog.csvというファイルを作って'時刻','温度'という行を書き込むサンプルです。
            ファイル作成先はpythonを実行した場所となります。
            openの第二引数を'w'にすると新規作成、'a'にすると既存のファイルに追記します。
            import csv
            with open('log.csv', 'w') as f:
               writer = csv.writer(f)
               writer.writerow(['時刻','温度'])
   ヒント3: logを取る間隔を変える、logの内容を増やす、logのファイル名や保存場所を変えるなど
            色々試してみましょう！
   """

   ### ここから問題  ###

   """(コードを記述)"""

   ### ここまで  ###


チャレンジ問題の１つ目は温度ロガーです。

ヒント
========

時刻の取得はQ3-5, 環境温度の取得はQ2-5を参考にしましょう。

新たに出てくる学習項目はファイルへの書き込みです。

**今回学習する項目1: csv.writer()**

今回は取得した時刻と温度をcsvファイルへと書き出していきます。csvへの書き込みはcsv.writerを使います。

最初の行にインデックスを書き込んで、以降取得した値を追記していきましょう。

下記がlog.csvというファイルを作って'時刻','温度'という行を書き込むサンプルです。

.. code-block:: python

   # csvのモジュールをインポートする
   import csv
   # 'log.csv'というファイルを開く。'w'とすると書き込み用となる
   with open('log.csv', 'w') as f:
      # csv書き込み用のwriterを定義する
      writer = csv.writer(f)
      # writerow()で行を書き込む。1列目が'時刻'で2列目が'温度'となる
      writer.writerow(['時刻','温度'])

上記のように、open()でファイルを開き、csv.writer()を定義、writerow()で列を書き込むといった流れです。

この書き方ですと、ファイル作成先はアプリを実行した場所と同じ階層になります。

open()の第二引数を'w'にすると新規作成(存在する場合は新しいファイルで上書き)、'a'にすると既存のファイルに追記します。

これを用いてインデックスを書き込んだ後は、ループ処理を書いて温度と時刻を取得→csvファイルに追記→10秒停止を繰り返しましょう。

追記する場合、open()の第二引数を'a'として先程作成したファイルを開き、取得した時刻と温度をwriterow()で書き込んでいきます。


答え合わせ
========
完成したら実行してみましょう

.. code-block:: bash

   python q4-1_temperature_logger.py

アプリ実行終了した際に、時刻と温度がcsvファイルに記録されていればOKです。

|
:doc:`回答 <a4-1>` へ進む
