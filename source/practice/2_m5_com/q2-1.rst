.. highlight:: python
   :linenothreshold: 10

******************************
Q2-1.ボタン入力の取得
******************************


問題
========

**Q2-1.ボタンAが押されたらコマンドラインに「ボタンAが押されています」と表示されるようにしましょう。**

ファイルの場所: akari_practice/2_m5_com/question/q2-1_button.py

.. code-block:: python

   #!/usr/bin/env python
   # -*- coding: utf-8 -*-

   """
   Q2-1.ボタンAが押されたらコマンドラインに「ボタンAが押されています」と表示されるようにしましょう。
   ヒント1: get()関数を使うとM5の値が取得できます。
   ヒント2: if文を使って、ボタンAが押された場合だけコマンドラインに出力するようにしましょう。
   """

   # M5と通信する際はm5serial_server_pyのライブラリをインポートする。
   from m5serial_server_py.m5serial_server_py import M5SerialServer
   # sleep関数を使うためにtimeのライブラリをインポートする。
   import time


   def main() -> None:
      """
      メイン関数
      """

      # M5SerialServerのインスタンスを作成する。
      m5 = M5SerialServer()

      ### ここから問題  ###
      # Ctrl + Cで終了するまでループし続ける
      while(True):
         m5_data = """(M5から値を取得する関数)"""
         # ボタンが押されているか判定。
         if("""(ボタンAが押されているかの判定処理)"""):
               """(コマンドラインに出力する処理)"""
         # 0.1秒停止処理を入れる。
         time.sleep(0.1)
      ### ここまで  ###


   if __name__ == '__main__':
      main()

ボタン入力を取得する方法を学習していきましょう。

ヒント
========

**今回使用するAKARIライブラリ1: get()**

M5のセンサ情報を取得するには、M5SerialServerのget()関数を使います。

   .. function:: dict get (void)
   | 環境センサの値を取得
   | - **引数**
   |   なし
   | - **返り値**
   |   `dict data`: 取得したデータをdictに格納。

この関数を呼び出すとdictに値が入って返って来ます。

この関数はm5serial_server_pyのライブラリに含まれており、22行目でm5という名前でこのライブラリのインスタンスを作成しています。

この場合、m5.get()のようにこの関数を呼び出します。

今回はボタンAの値を取得します。この場合、返り値のdictの['button_a']というキーに結果が格納されています。

取得できるデータとキーの一覧は :doc:`../../spec/soft_base` を参照してください。

|
**今回学習する項目1: if else**

29行目に"if"が登場しています。

if文は条件分岐で、条件式 の結果が True になったとき、処理が実行されます。

条件式がFalseになった場合、else以下が実行されます。

.. code-block:: python

   if 条件式:
      処理1
   else:
      処理2

上記の場合、条件式がTrueの場合処理1だけが実行されます。条件式 が False の場合は、処理1は実行されず、処理2だけが実行されます。

詳しくは下記を参照してください。

https://www.python.jp/train/if_condition/if_statement.html

29行目の場合、 **m5_data['button_a']の値がTrueだった場合** の条件式を記載します。

30行目では、コマンドラインにメッセージをprintします。問題文にあるように、"ボタンAが押されています"としましょう。


答え合わせ
================
完成したら実行してみましょう

.. code-block:: bash

   python q2-1_button.py

実行中にボタンAを押したとき、コマンドラインに"ボタンAが押されています"と表示されたらOKです。

|
:doc:`回答 <a2-1>` へ進む
