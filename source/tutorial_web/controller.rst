***********************************************************
webコントローラを使ってみよう
***********************************************************

| webコンソールのcontrollerページにアクセスすることで、ブラウザ上からAKARIの基本機能の制御を試すことが出来ます。
| ここではAKARIのwebコントローラを使ってみましよう。

===========================================================
必要なサービスを立ち上げる
===========================================================

| :doc:`access` の手順でwebコンソールへアクセスしたら、コントローラを使うために必要なサービスを立ち上げていきます。

1. Servicesページを開く

| 左のページリストから、Servicesを選択し、開きます。

2. akari_rpc_serverを立ち上げる

| もしakari_rpc_serverが立ち上がっていなかったら、実行ボタンをクリックして立ち上げます。
| STATUSがRUNNINGに変わればOKです。

3. akari_controller_serverを立ち上げる。

| akari_controller_serverの実行ボタンをクリックして立ち上げます。
| STATUSがRUNNINGに変わればOKです。

===========================================================
webコントローラにアクセスする
===========================================================

左のページリストから、Controllerを選択し、開きます。

===========================================================
機能の説明
===========================================================

webコントローラのページの見方と機能について説明します。

Camera
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

| AKARIのヘッドのカメラの映像をストリーミングできます。
| 下記の3種類のボタンを押すことでカメラウインドウの映像が切り替わります。

- NONE
| ストリーミングを停止します。

- RGB
| RGBカメラの画像をストリーミングします。

- DEPTH
| ステレオカメラによるDepthの画像をストリーミングします。

- OBJECTDETECTION
| mobilenetによる物体認識の結果をオーバーレイしたRGB画像をストリーミングします。

Sensor input
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

センサからの各入力値を表示します。

- Button A-C
| M5前面のボタンA-Cの値を表示します。
| ボタンを押すと値が1に変わります。

- din0, din1, ain0
| ヘッドGPIOのdin0, din1, ain0の入力値を表示します。

- Temperature
| 環境センサの取得した温度を表示します。単位は[℃]です。

- Pressure
| 環境センサの取得した圧力を表示します。単位は[Pa]です。

- Brightness
| 環境センサの取得した明るさを4096段階で出力します。値が小さいほど明るくなります。

Joint
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

ヘッドのサーボ制御を行います。

1. Servoトグル

| サーボのON、OFFを行います。ONにするとヘッドのサーボがロックされます。

2. ジョイステック

| 内側の円をドラッグして動かすことで、ヘッドの上下左右の向きを動かすことが出来ます。

3. 速度設定スライダー&ボックス

| サーボの目標速度をスライダーもしくはテキストボックスへの数値入力で変更することが出来ます。

4. 加速度設定スライダー&ボックス

| サーボの目標加速度をスライダーもしくはテキストボックスへの数値入力で変更することが出来ます。

5. Pan位置設定スライダー&ボックス

| Pan(左右方向)のヘッドの目標位置をスライダーもしくはテキストボックスへの数値入力で指令することが出来ます。
| またCurrent欄に現在位置を表示します。

6. Tilt位置設定スライダー&ボックス

| Tilt(上下方向)のヘッドの目標位置をスライダーもしくはテキストボックスへの数値入力で指令することが出来ます。
| またCurrent欄に現在位置を表示します。

7. SENDボタン

| 指定したヘッドの目標位置への移動を実行します。

8. CURRENTボタン

| 目標位置設定を現在位置にリセットします。

9. RESETボタン

| サーボを初期位置に移動します。

Pinout
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

ヘッドのGPIO出力を制御します。

1. dout0, dout1トグル

| ヘッドのdout出力をON,OFFします。

2. pwmout0スライダー&ボックス

| ヘッドのpwmout0出力の目標値を設定します。

3. SENDボタン

| ヘッドのpwmout0出力の変更を実行します。

4. RESETボタン

| dout0, dout1,pwmout0出力を初期化します。

Display
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

ディスプレイの文字出力を制御します。

1. テキストボックス

| 表示する文字列を入力します。

2. FontColor, DisplayColorキャンバス

| カラーキャンバスから、文字色及び背景色を選択できます。

3. FontSizeスライダー

| 表示する文字のサイズを指定できます。

4. SENDボタン

| 文字の表示を実行します。

5. RESETボタン

| 画面表示をリセットします。


| このControllerで、AKARIの基本機能はほぼ全て試すことができます。
| 次はwebコンソールからJupyterLabを起動してプロジェクトを作成してみましょう。

:doc:`jupyter` へ進む

:doc:`access` へ戻る